#
# deptrac.yaml
#
# @see https://qossmic.github.io/deptrac/configuration
# @see https://codesoapbox.dev/ports-adapters-aka-hexagonal-architecture-explained/

deptrac:
  paths:
    - ../../src

  exclude_files:
    - '#.*Test.*#'
    - '#.*Admin.*#'

  layers:

    ### Application ###
    # DRIVING models
    # User or console input/output values

    -
      name: Application
      collectors:
        -
          type: className
          value: .*\\Application\\.*

    ### Domain ###
    # No dependencies or tech
    # Business model and rules only

    -
      name: Domain
      collectors:
        -
          type: className
          value: .*\\Domain\\.*

    ### Infrastructure ###
    # DRIVERS models
    # Server, framework, dependencies

    -
      name: Infrastructure
      collectors:
        -
          type: className
          value: .*\\Infrastructure\\.*

  # RULES
  ruleset:
    # Application
    Application:
      - Domain
      - Infrastructure
    Infrastructure:
      - Domain

  # formatters:
  #   graphviz:
  #     groups:
  #       Entrypoints:
  #         - Controllers
  #       Persistence:
  #         - Entities