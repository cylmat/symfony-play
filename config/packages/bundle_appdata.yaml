services:
    _defaults:
        autowire: true      # Automatically injects dependencies in your services.
        autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.
        public: false

    # BUNDLE #
    App\AppData\:
        resource: ../../src/AppData/

    #################
    # DDD Interface #
    #################
    App\AppData\Domain\Manager\RedisManagerInterface: '@App\AppData\Infrastructure\Manager\RedisManager'

    #########
    # INFRA #
    #########
    App\AppData\Infrastructure\Redis\RedisClientInterface:
        factory: '@App\AppData\Infrastructure\Redis\RedisClientFactory'

    # APP REGISTRY ###
    # @todo: Use fake Doctrine for tests
    # App\AppData\Infrastructure\Manager\AppEntityRegistry:
    #     arguments: 
    #         $reg: !tagged_iterator tag
    #     decorates: Doctrine\Common\Persistence\ManagerRegistry
    #     NOT NEEDED arguments: ['@.inner'] # Automatic with default service.yaml
    # App\AppData\Infrastructure\Manager\AppRepositoryRegistry:
    #     arguments:
    #         $repositories: !tagged_iterator app.repository